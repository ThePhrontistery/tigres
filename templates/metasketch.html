{% extends "base.html" %}
{% block content %}
<div class="min-h-screen bg-gray-50 flex flex-col">
  <header class="bg-blue-700 text-white p-4 flex items-center justify-between">
    <h1 class="text-2xl font-bold">Metasketch: el experimento de vibecoding</h1>
    <form method="post" action="/logout">
      <button class="bg-blue-500 px-3 py-1 rounded hover:bg-blue-600">Cerrar sesión</button>
    </form>
  </header>
  <main class="flex-1 flex flex-row gap-2 p-2">
    <!-- Panel de carga de documentos -->
    <section class="bg-white rounded shadow p-4 w-1/4 min-w-[220px]">
      <h2 class="font-semibold mb-2">Documentos</h2>
      <div id="document-panel" hx-get="/documents/list" hx-trigger="load" hx-swap="innerHTML"></div>
    </section>
    <!-- Árbol de contenidos -->
    <section class="bg-white rounded shadow p-4 w-1/4 min-w-[220px]">
      <div id="content-tree-panel" hx-get="/content-tree" hx-trigger="load" hx-swap="innerHTML"></div>
    </section>
    <!-- Editor (Markdown) -->
    <section class="bg-white rounded shadow p-4 flex-1 min-w-[300px]">
      <h2 class="font-semibold mb-2">Editor</h2>
      <div id="markdown-panel" hx-get="/markdown/editor" hx-trigger="load" hx-swap="innerHTML"></div>
    </section>
    <!-- Chat IA -->
    <aside class="bg-white rounded shadow p-4 w-1/5 min-w-[180px] flex flex-col">
      <div id="chat-assistant-panel-htmx" hx-get="/api/chat/assistant" hx-trigger="load" hx-swap="innerHTML"></div>
    </aside>
  </main>
</div>
{% endblock %}
