{% extends "base.html" %}
{% block content %}
<div id="modal-overlay" class="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-40">
  <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-lg relative animate-fade-in">
    <button class="absolute top-2 right-2 text-gray-400 hover:text-blue-700 text-2xl font-bold" onclick="document.getElementById('document-detail-modal').innerHTML = ''">&times;</button>
    <h2 class="text-xl font-bold mb-2 text-primary">Detalles del documento</h2>
    {% if document %}
      <div class="mb-2">
        <span class="font-semibold">Nombre:</span> {{ document.file_name }}
      </div>
      <div class="mb-2">
        <span class="font-semibold">Categoría:</span> {{ document.categoria or 'N/A' }}
      </div>
      <div class="mb-2">
        <span class="font-semibold">Descripción:</span> {{ document.descripcion or 'N/A' }}
      </div>
      <div class="mb-2">
        <span class="font-semibold">Proyecto:</span> {{ document.proyecto or 'N/A' }}
      </div>
      <div class="mb-2">
        <span class="font-semibold">Vista previa del contenido:</span>
        <pre class="bg-slate-100 rounded p-2 max-h-64 overflow-auto text-xs">{{ document.text[:2000] }}{% if document.text|length > 2000 %}...{% endif %}</pre>
      </div>
    {% else %}
      <div class="text-red-600">No se encontró el documento.</div>
    {% endif %}
    <button class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full" onclick="document.getElementById('document-detail-modal').innerHTML = ''">Cerrar</button>
  </div>
</div>
<style>
@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
.animate-fade-in { animation: fade-in 0.2s; }
</style>
<script>
document.getElementById('modal-overlay')?.addEventListener('click', function(e) {
  if (e.target === this) { this.innerHTML = ''; }
});
</script>
{% endblock %}
